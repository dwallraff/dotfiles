## Install script

##
# Setup

# Get sudo upfront
sudo -v
# Keep-alive: update existing `sudo` time stamp until the script has finished.
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

# Create code dir
mkdir -p ~/code

# Install XCode Command Line tools
xcode-select --install

##
# Do stuff

# Install homebrew
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

# Install Cask and tap versions
brew install caskroom/cask/brew-cask
brew tap caskroom/versions

# Update homebrew
brew update

# Install brews
brew install git
brew install jq
brew install md5deep
brew install mtr
brew install nmap
brew install wget

# Install taps
brew cask install --appdir="/Applications" box-sync
brew cask install --appdir="/Applications" caffeine
brew cask install --appdir="/Applications" dropbox
brew cask install --appdir="/Applications" evernote
brew cask install --appdir="/Applications" flux
brew cask install --appdir="/Applications" google-drive
brew cask install --appdir="/Applications" google-chrome
brew cask install --appdir="/Applications" iterm2
brew cask install --appdir="/Applications" keepassx
brew cask install --appdir="/Applications" spotify
brew cask install --appdir="/Applications" sublime-text3
brew cask install --appdir="/Applications" virtualbox
brew cask install --appdir="/Applications" vagrant

# Get dotfiles
git clone https://github.com/dwallraff/dotfiles.git

# Install SublimeText packages
curl https://sublime.wbond.net/Package%20Control.sublime-package > ~/Library/Application\ Support/Sublime\ Text\ 3/Packages/User/Package\ Control.sublime-package
ln -sf ~/code/dotfiles/common/Package\ Control.sublime-settings ~/Library/Application\ Support/Sublime\ Text\ 3/Packages/User/Package\ Control.sublime-settings

# Install Source Code Pro font
cd /tmp
wget https://github.com/adobe-fonts/source-code-pro/archive/1.017R.tar.gz
tar xvzf 1.017R.tar.gz
sudo mv source-code-pro-1.017R/OTF/*.OTF /Library/Fonts/.

## Cleanup
brew cleanup --force
rm -f -r /Library/Caches/Homebrew/*